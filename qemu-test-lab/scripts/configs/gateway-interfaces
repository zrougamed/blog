# /etc/network/interfaces - Gateway VM
# 
# This configuration is for Alpine Linux
# Copy to /etc/network/interfaces inside the gateway VM
#
# Network setup:
# - eth0: Internal network (10.0.100.1/24)
# - eth1: Internet access via NAT (DHCP)

auto lo
iface lo inet loopback

# Internal network interface
auto eth0
iface eth0 inet static
    address 10.0.100.1
    netmask 255.255.255.0
    # No gateway - this IS the gateway

# External network interface (Internet access)
auto eth1
iface eth1 inet dhcp

# Additional configuration needed:
#
# 1. Enable IP forwarding:
#    echo 'net.ipv4.ip_forward = 1' >> /etc/sysctl.conf
#    sysctl -p
#
# 2. Install and configure iptables:
#    apk add iptables
#    rc-update add iptables
#
# 3. Setup NAT (allow internal network to access internet):
#    iptables -t nat -A POSTROUTING -o eth1 -j MASQUERADE
#    iptables -A FORWARD -i eth0 -o eth1 -j ACCEPT
#    iptables -A FORWARD -i eth1 -o eth0 -m state --state RELATED,ESTABLISHED -j ACCEPT
#
# 4. Save iptables rules:
#    /etc/init.d/iptables save
#
# 5. Restart networking:
#    rc-service networking restart
